# 性能优化介绍

## 什么是性能

MDN上的web性能定义：web性能是网站或应用程序的客观度量和可感知的用户体验。

- 减少整体加载时间：减小文件体积、减少HTTP请求、使用预加载
- 使网站尽快可用：仅加载首屏内容，其他内容根据需要进行懒加载
- 平滑和交互性：使用css替代js动画、较少UI重绘
- 感知表现：你的用户可能不能做得更快，但你可以让用户感觉更快。耗时操作要给用户反馈，比如加载动画、进度条、骨架屏等提示信息
- 性能测定：性能指标、性能测试、性能监控持续优化

## 如何进行web性能优化

1. 首先需要了解性能指标——多块才算快？
2. 使用专业的工具可量化地评估出网站或应用的性能表现
3. 立足于网站页面响应的生命周期，分析出造成性能表现的原因
4. 进行技术改造，可行性分析等具体的优化实施
5. 迭代优化

### 性能指标

- RAIL 性能模型
- 基于用户体验的核心指标
- 新一代性能指标：Web Vitals

### 性能测量

- 浏览器DevTools调试工具
- 网络监控分析
- 性能监控分析
- 灯塔（Lighthouse）
- 网站整体质量评估，并给出优化建议
- WebPageTest
- 多测试地点
- 全面的性能报告

### 生命周期

![image-20230712130556518](性能优化.assets/image-20230712130556518.png)

### 优化方案

- 从请求发出到收到响应的优化：DNS查询、HTTP长连接、HTTP2、HTTP压缩、HTTP缓存
- 关键渲染路径优化，比如是否存在不必要的重绘和回流
- 加载过程的优化，比如延长加载，是否有不需要在首屏展示的非关键信息，占用了页面加载时间
- 资源优化，比如图片、视频等不同格式类型会有不同的使用场景，在使用过程中是否恰当
- 构建优化，比如压缩合并，基于 webpack 构建优化方案

# web 性能指标

## RAIL 性能模型

- 响应 Response:：应该尽可能快速的响应用户(感知延迟之前接收到操作的反馈)（100ms内）
- 动画 Animation：展示动画每一帧以16ms进行渲染，保持一致性避免卡顿
- 空闲 Idel：使用js主线程应把任务划分到执行时间小于50ms片段，这样可以释放线程进行用户交互
- 加载：应该小于1s的时间加载完成网站，并且可以进行交互

## 基于用户体验的性能指标


## 1. 起步

```
git
git --version

// 配置
git config -l git config --list
git config user.name "well"
git config user.emial "1085550655@qq.com"

// 日志
git log 
git show <id>
git diff id \ id
```

## 2. 基本的Git概念

### 2.1 基本概念

#### 2.1.1 版本库

在版本库中，Git维护两个主要的数据结构：对象库（object store）和索引（index）。所有这些版本库数据存放在工作目录根目录 下一个名为.git 的隐藏子目录中。

#### 2.1.2 git对象类型

**包含：**

- 原始数据文件和所有日志消息
- 作者信息
- 日期
- 其他用来重建项目任意版本或分支的信息

**类型**

- 块（blob）：文件的每一个版本表示为一个块
- 目录树 （tree）：一个目录树对象代表一层目录信息
- 提交（commit）：一个提交（commit）对象保存版本库中每一次变化的元数据，包 括作者、提交者、提交日期和日志消息
- 标签（tag）:一个标签对象分配一个任意的且人类可读的名字给一个特定对 74 象，通常是一个提交对象

#### 2.1.3 索引

索引捕获项目在某个时刻的整体结构的一个版本。

例子：

你通过执行Git命令在索 引中暂存（stage）变更。变更通常是添加、删除或者编辑某个文件或 某些文件。索引会记录和保存那些变更，保障它们的安全直到你准备 好提交了。还可以删除或替换索引中的变更。

#### 2.1.4 可寻址内容名称

- 对象库中的每个对象都有一个唯一的名称，这个名称是向对象的内容应用SHA1得到的SHA1散列值。
- 全局唯一标识符：SHA散列计算的一个重要特性是不管内容在哪里， 它对同样的内容始终产生同样的ID

#### 2.1.5 git 追踪内容

1. Git的对象库基于其对象内容的散列计算的值，而不是基于用户原始文件布局的文件名或目录名设置。
2. 当文件从一个版本变到下一个版本的时候，Git的内部数据库有效地存储每个文件的每个版本，而不是它们的差异。

#### 2.1.6 打包文件

要创建一个打包文件，Git首先定位内容非常相似的全部文件，然后为它们之一存储整个内容。之后计算相似文件之间的差异并 且只存储差异。

### 2.2 工作时的概念

#### 2.2.1  对象、散列和blob

 Git只关心文件里面的内容：表示“hello world”的12个字节和换行符（跟之前创建的blob一样）。Git对这个blob执行一些操作，计算它的SHA1散列值，把散列值的十六进制表示作为文件名它放进对象库中。

#### 2.2.2 文件和树

- Git通过另一种叫做目录树（tree）的对象来跟踪文件的路径名
- 使用git add命令时，Git会给添加的每个文件的内容创建一个对象，但它并不会马上为树创建一个对象，而是更新索引
- 每 次执行命令（比如，git add、git rm或者git mv）的时候，Git会用新的 路径名和blob信息来更新索引

```
git add .
git ls-files -s
// 100644 3b18e512dba79e4c8300dd08aeb37f8e728b8dad 0       hello.txt
```

#### 2.2.3 提交

- 标识关联文件的树对象的名称；
-  创作新版本的人（作者）的名字和创作的时间；
-  把新版本放到版本库的人（提交者）的名字和提交的时间；
-  对本次修订原因的说明（提交消息）

#### 2.2.4 标签

- 轻量级的 （lightweight）
  - 只是一个提交对象的引用，通常被版本库视为是私有的
  - 这些标签并不在版本库里创建永久对象
- 带附注的（annotated）

  - 带标注的标签则更加充 实，并且会创建一个对象
  - 它包含你提供的一条消息，并且可以根据 RFC 4880来使用GnuPG密钥进行数字签名


## 3. 文件管理和索引

- 可以在工作目录 里编辑，然后把修改提交给版本库来保管
- 在工作目录和版本库之间加设了一层索引（index），用 来暂存（stage）、收集或者修改
- 使用Git来管理代码时，你会在工作目录下编辑，在索引中积累修改
- 然后把索引中累积的修改作 为一次性的变更来进行提交

**步骤：**一次提交其实是个两步的过程

- 暂存变更
- 提交变更

```
git add hello.txt

// 把文件从暂存区移除 
git rm hello.txt --cached
// 把文件从暂存区移除并删除
git rm hello.txt -f
```

### 3.1 关于索引的一切

- Git的索引不包含任何文件内容，它仅仅追踪你想要提交的那些 内容
- 当执行git commit命令的时候，Git会通过检查索引而不是工作 目录来找到提交的内容

### 3.2 git 中的文件分类

- 已追踪的（Tracked）
  - 已经在版本库中的文件，或者是已暂存到索引 中的文件
- 被忽略（Ignored）
  - 明确声明为不可见或被忽略
- 未追踪的（Untracked）

**查看**

```
git status
```

### 3.3 使用git add

- 将文件转化为已追踪的

- 作用于一个文件名，则递归暂存目录即子目录下的文件

  ```
  git add hello/abc/abc.txt
  
  git add hello
  ```

## 4. 提交

- 每一个Git提交都代表一个相对于之前的状态的单个原子变更集。
- 对于一个提交中所有做过的改动  ，无论多少目录、文件、 行、字节的改变，要么全部应用，要么全部拒绝。

### 4.1 提交历史记录

- git log id
  - 日志将从该提交开始回溯输出
- git log -n
  - 限制个数
- git log --oneline
  - 每个log一行输出
- git show HEAD~2
- gitk
  - 显示git提交图
